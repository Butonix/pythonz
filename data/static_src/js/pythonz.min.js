pythonz={bootstrap:function(){xross.automate(),$(function(){pythonz.mark_user(),sitecats.bootstrap(),sitecats.make_cloud("tags_box"),$(".mod__has_tooltip").tooltip()})},mark_user:function(){$(".py_user").each(function(t,e){var o=e.innerHTML.replace(/\[u:(\d+):\s*([^\]]+)\s*\]/g,'<a href="http://pythonz.net/users/$1" title="Профиль на pythonz">$2</a>');$(e).html(o)})},activate_comments_tab:function(t){setTimeout(function(){var t=0,e=["comments_vk","comments_fb","comments_disqus","comments_internal"];$.each(e,function(e,o){var n=parseInt($("#"+o+"_cnt").text());n>t&&($('a[href="#'+o+'"]',"#comments_tabs").tab("show"),t=n)})},t)},init_editor:function(t){function e(t,e,o,n){if(!/editor-preview-active/.test(t.getWrapperElement().lastChild.className)){var r,a=o[0],s=o[1],i=t.getCursor("start"),l=t.getCursor("end");n&&(s=s.replace("#url#",n)),e?(r=t.getLine(i.line),a=r.slice(0,i.ch),s=r.slice(i.ch),t.replaceRange(a+s,{line:i.line,ch:0})):(r=t.getSelection(),t.replaceSelection(a+r+s),i.ch+=a.length,i!==l&&(l.ch+=a.length)),t.setSelection(i,l),t.focus()}}function o(t,o){e(t.codemirror,t.getState()[o],t.options.insertTexts[o])}function n(t,e,n){return{name:t,action:function(e){o(e,t)},className:"fa fa-"+e,title:n}}if(t)return new SimpleMDE({element:t,forceSync:!0,indentWithTabs:!1,spellChecker:!1,toolbar:["bold","italic",n("accent","flag","Акцент"),n("quote","quote-left","Цитата"),"|","image","link","|",n("code","code","Код"),n("gist","github","Gist"),n("podster","headphones","Подкаст с podster.fm"),"|","fullscreen"],insertTexts:{image:[".. image:: ",""],gist:[".. gist:: ",""],podster:[".. podster:: ",""],link:["`","<>`_"],accent:["``","``"],code:["\n.. code::\n","\n\n\n"],quote:["\n```\n","\n```"]}})},Reference:{RULE_PYVERSION_ADDED:[/\+py([\w\.]+)/g,'<small><div class="label label-info" title="Актуально с версии">$1</div></small>'],RULE_PYVERSION_REMOVED:[/-py([\w\.]+)/g,'<small><div class="label label-danger" title="Устрело в версии">$1</div></small>'],RULE_LITERAL:[/'([^']+)'/g,'<strong class="cl__green">$1</strong>'],RULE_UNDERMETHOD:[/(__[^\s]+__)/g,"<i>$1</i>"],RULE_BASE_TYPES:[/([^\w\/])(bool|callable|dict|False|int|iterable|iterator|list|None|object|set|str|True|tuple|unicode)([^\w])/g,"$1<small><code>$2</code></small>$3"],RULE_EXCEPTIONS:[/([^\w])(AttributeError|AssertionError|ImportError|IndexError|KeyError|NotImplementedError|RuntimeError|StopIteration|SyntaxError|SystemError|TypeError|UnboundLocalError|ValueError|OSError)([^\w])/g,'$1<small><div class="label label-warning">$2</div></small>$3'],RULE_EMDASH:[/\s+-\s+/g," &#8212; "],decorate_description:function(t){this.decorate_area(t,[this.RULE_PYVERSION_REMOVED,this.RULE_PYVERSION_ADDED,this.RULE_BASE_TYPES,this.RULE_EXCEPTIONS,this.RULE_EMDASH])},decorate_func_result:function(t){this.decorate_area(t,[this.RULE_PYVERSION_REMOVED,this.RULE_PYVERSION_ADDED,this.RULE_BASE_TYPES,this.RULE_EMDASH])},decorate_func_params:function(t){var e=function(t,e,o){return e=e.replace(/([^=]+)(=.+)/g,'$1<span class="text-muted">$2</span>'),'<small><span class="glyphicon glyphicon-certificate"></span></small> <b>'+e+"</b>"+o};this.decorate_area(t,[[/([^>\s]+)(\s--)/g,e],[/--/g,":"],this.RULE_PYVERSION_REMOVED,this.RULE_PYVERSION_ADDED,this.RULE_LITERAL,this.RULE_UNDERMETHOD,this.RULE_BASE_TYPES,this.RULE_EXCEPTIONS,this.RULE_EMDASH])},decorate_area:function(t,e){var o=$("#"+t),n=o.html();void 0!==n&&$.each(e,function(t,e){n=n.replace(e[0],e[1])}),o.html(n)}},Map:function(t,e){var o=this,n=$("#"+t),r=e;this.get_bounds_for_coords=function(t){return ymaps.util.bounds.getCenterAndZoom(t,[n.width(),n.height()])},this.get_placemarks_from_map_objects=function(t){var e=[],o=0;return void 0===t&&(t=r),$.each(t,function(t,n){var r=n.coords,a=n.title,s=n.descr,i=n.link;e[o]=new ymaps.Placemark(r,{balloonContentHeader:a,balloonContentBody:s,balloonContentFooter:i,clusterCaption:a,place_id:t},{hideIconOnBalloonOpen:!1,preset:"islands#darkBlueCircleDotIcon"}),o++}),e},this.get_clusterer=function(){var t=o.get_placemarks_from_map_objects(),e=new ymaps.Clusterer({preset:"islands#darkBlueClusterIcons",clusterDisableClickZoom:!0,clusterBalloonPanelMaxMapArea:0,clusterBalloonContentLayoutWidth:250,clusterBalloonContentLayoutHeight:100,clusterBalloonLeftColumnWidth:100});return e.add(t),e},this.init_map=function(){ymaps.ready(function(){var t=o.get_clusterer(),e=o.get_bounds_for_coords(t.getBounds());$.extend(e,{controls:["zoomControl"]});var r=new ymaps.Map(n.attr("id"),e);r.geoObjects.add(t)})},o.init_map()}},pythonz.bootstrap();